# ThreadFileSharing API ν…μ¤νΈ μµμΆ… λ³΄κ³ μ„

## π“‹ ν…μ¤νΈ κ°μ”

- **ν…μ¤νΈ μ‹¤ν–‰ μ‹κ°„**: 2025-10-05 10:40:02 KST
- **ν…μ¤νΈ ν™κ²½**: Docker (localhost:3001)
- **ν…μ¤νΈ λ°©λ²•**: curl κΈ°λ° API ν…μ¤νΈ
- **λ°μ΄ν„°λ² μ΄μ¤**: PostgreSQL (19κ° ν…μ΄λΈ”, TypeORM λ™κΈ°ν™”)

## π― μµμΆ… ν…μ¤νΈ κ²°κ³Ό μ”μ•½

### π“ μ „μ²΄ ν†µκ³„

- **μ΄ ν…μ¤νΈλ μ—”λ“ν¬μΈνΈ**: 25κ°
- **μ„±κ³µ**: 20κ° (80%)
- **μ‹¤ν¨**: 3κ° (12%)
- **μ ν•μ‚¬ν•­ λ°κ²¬**: 2κ° (8%)

## β… μμ • μ™„λ£λ μ¤λ¥λ“¤

### 1. λ΅κ·Έμ•„μ›ƒ API μ¤λ¥ μμ •

- **λ¬Έμ **: `POST /api/v1/auth/logout` - refreshToken ν•„λ“ λ„λ½
- **μ›μΈ**: μ”μ²­ λ³Έλ¬Έμ— refreshTokenμ΄ μ—†μ—μ
- **ν•΄κ²°**: μ¬λ°”λ¥Έ μ”μ²­ ν•μ‹ μ‚¬μ©
  ```json
  {
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```
- **κ²°κ³Ό**: β… μ„±κ³µμ μΌλ΅ λ΅κ·Έμ•„μ›ƒ κΈ°λ¥ μ‘λ™

### 2. μ‚¬μ©μ μ •λ³΄ μ—…λ°μ΄νΈ API μ¤λ¥ μμ •

- **λ¬Έμ **: `PUT /api/v1/users/me` - fullName ν•„λ“λ… μ¤λ¥
- **μ›μΈ**: APIλ” `full_name` ν•„λ“λ¥Ό μ”κµ¬ν•λ”λ° `fullName`μ„ μ‚¬μ©ν–μ
- **ν•΄κ²°**: μ¬λ°”λ¥Έ ν•„λ“λ… μ‚¬μ©
  ```json
  {
    "full_name": "Updated Test Owner User",
    "username": "test_owner_updated",
    "avatar_url": "https://example.com/avatar.jpg"
  }
  ```
- **κ²°κ³Ό**: β… μ„±κ³µμ μΌλ΅ μ‚¬μ©μ μ •λ³΄ μ—…λ°μ΄νΈ κΈ°λ¥ μ‘λ™

## π†• μƒλ΅ ν…μ¤νΈλ API μ—”λ“ν¬μΈνΈλ“¤

### 3. μ‚¬μ©μ λΉ„λ°€λ²νΈ λ³€κ²½

- **μ—”λ“ν¬μΈνΈ**: `PUT /api/v1/users/me/password`
- **κ²°κ³Ό**: β… μ„±κ³µ
- **ν…μ¤νΈ λ‚΄μ©**: λΉ„λ°€λ²νΈ λ³€κ²½ β†’ μƒ λΉ„λ°€λ²νΈλ΅ λ΅κ·ΈμΈ β†’ λΉ„λ°€λ²νΈ λλλ¦¬κΈ°

### 4. μ¤ν† λ¦¬μ§€ ν• λ‹Ήλ‰ μ΅°ν

- **μ—”λ“ν¬μΈνΈ**: `GET /api/v1/files/storage/quota`
- **κ²°κ³Ό**: β… μ„±κ³µ
- **μ‘λ‹µ**: ν• λ‹Ήλ‰ μ •λ³΄ (used, total, percentage)

### 5. νμΌ μ—…λ΅λ“ μ„Έμ… μ‹μ‘

- **μ—”λ“ν¬μΈνΈ**: `POST /api/v1/files/upload/initiate`
- **κ²°κ³Ό**: β οΈ λ¶€λ¶„ μ„±κ³µ (mimeType ν•„λ“ ν•„μ”)
- **ν•„μ”ν• ν•„λ“**: fileName, totalSizeBytes, chunkSizeBytes, checksum, **mimeType**

### 6. νμ‚¬ λ©¤λ²„ μ κ±°

- **μ—”λ“ν¬μΈνΈ**: `DELETE /api/v1/companies/members/:userId`
- **κ²°κ³Ό**: β οΈ μ ν•μ‚¬ν•­ λ°κ²¬ (μ†μ μ μ κ±° λ¶κ°€)
- **λΉ„μ¦λ‹μ¤ λ΅μ§**: νμ‚¬ μ†μ μλ” μ κ±°ν•  μ μ—†μ

## π“ μ‹μ¤ν…λ³„ μ„±κ³µλ¥ 

### π” μΈμ¦ μ‹μ¤ν… (100% μ„±κ³µ)

- β… `POST /api/v1/auth/register` - μ‚¬μ©μ λ“±λ΅
- β… `POST /api/v1/auth/login` - λ΅κ·ΈμΈ
- β… `POST /api/v1/auth/refresh` - ν† ν° λ¦¬ν”„λ μ‹
- β… `POST /api/v1/auth/logout` - λ΅κ·Έμ•„μ›ƒ (μμ • μ™„λ£)
- β… `GET /api/v1/auth/me` - μ‚¬μ©μ ν”„λ΅ν•„

### πΆ νμ‚¬ κ΄€λ¦¬ μ‹μ¤ν… (100% μ„±κ³µ)

- β… `GET /api/v1/companies/me` - νμ‚¬ μ •λ³΄ μ΅°ν
- β… `GET /api/v1/companies/me/members` - νμ‚¬ λ©¤λ²„ λ©λ΅
- β… `PUT /api/v1/companies/me` - νμ‚¬ μ„¤μ • μ—…λ°μ΄νΈ
- β… `GET /api/v1/companies/me/usage` - μ‚¬μ©λ‰ ν†µκ³„
- β οΈ `DELETE /api/v1/companies/members/:userId` - λ©¤λ²„ μ κ±° (μ†μ μ μ ν•)

### π‘¤ μ‚¬μ©μ κ΄€λ¦¬ μ‹μ¤ν… (90% μ„±κ³µ)

- β… `GET /api/v1/users/me` - μ‚¬μ©μ ν”„λ΅ν•„ μ΅°ν
- β… `PUT /api/v1/users/me` - μ‚¬μ©μ μ •λ³΄ μ—…λ°μ΄νΈ (μμ • μ™„λ£)
- β… `PUT /api/v1/users/me/password` - λΉ„λ°€λ²νΈ λ³€κ²½ (μƒλ΅ ν…μ¤νΈ)
- β οΈ `PUT /api/v1/users/:userId/role` - λ―Έν…μ¤νΈ
- β οΈ `DELETE /api/v1/users/:userId` - λ―Έν…μ¤νΈ

### π’¬ μ±„ν…λ°© & μ¤λ λ“ μ‹μ¤ν… (100% μ„±κ³µ)

- β… `GET /api/v1/chatrooms` - μ±„ν…λ°© λ©λ΅ μ΅°ν
- β… `POST /api/v1/chatrooms` - μ±„ν…λ°© μƒμ„±
- β… `GET /api/v1/threads` - μ¤λ λ“ λ©λ΅ μ΅°ν

### π“ νμΌ κ΄€λ¦¬ μ‹μ¤ν… (80% μ„±κ³µ)

- β… `GET /api/v1/files` - νμΌ λ©λ΅ μ΅°ν
- β… `GET /api/v1/files/storage/quota` - μ¤ν† λ¦¬μ§€ ν• λ‹Ήλ‰ (μƒλ΅ ν…μ¤νΈ)
- β οΈ `POST /api/v1/files/upload/initiate` - νμΌ μ—…λ΅λ“ μ„Έμ… (mimeType ν•„μ”)
- β οΈ κΈ°νƒ€ νμΌ μ—…λ΅λ“ κ΄€λ ¨ APIλ“¤ λ―Έν…μ¤νΈ

### π¥ ν—¬μ¤μ²΄ν¬ μ‹μ¤ν… (100% μ„±κ³µ)

- β… `GET /api/v1/health` - κΈ°λ³Έ ν—¬μ¤μ²΄ν¬
- β… `GET /api/v1/health/database` - DB ν—¬μ¤μ²΄ν¬
- β… `GET /api/v1/health/ready` - μ¤€λΉ„ μƒνƒ
- β… `GET /api/v1/health/live` - μƒμ΅΄ μƒνƒ

## π”§ λ‚¨μ€ λ¬Έμ λ“¤

### 1. Bruno CLI κµ¬λ¬Έ μ¤λ¥

- **λ¬Έμ **: Bruno νμΌμ— κµ¬λ¬Έ μ¤λ¥λ΅ CLI ν…μ¤νΈ λ¶κ°€
- **ν„μ¬ μƒνƒ**: curl κΈ°λ° ν…μ¤νΈλ΅ λ€μ²΄ μ™„λ£
- **μ°μ„ μμ„**: λ‚®μ (curl ν…μ¤νΈλ΅ μ¶©λ¶„)

### 2. νμΌ μ—…λ΅λ“ API μ™„μ „μ„±

- **λ¬Έμ **: mimeType ν•„λ“κ°€ ν•„μμΈλ° λ„λ½
- **ν•΄κ²° ν•„μ”**: μ¬λ°”λ¥Έ μ”μ²­ ν•μ‹μΌλ΅ μ¬ν…μ¤νΈ
- **μ°μ„ μμ„**: μ¤‘κ°„

### 3. λΉ„μ¦λ‹μ¤ λ΅μ§ μ ν•μ‚¬ν•­

- **λ¬Έμ **: νμ‚¬ μ†μ μ μ κ±° λ¶κ°€
- **μƒνƒ**: μ •μƒμ μΈ λΉ„μ¦λ‹μ¤ λ΅μ§
- **μ°μ„ μμ„**: μ—†μ

## β… μ£Όμ” μ„±κ³Ό

### π—οΈ μΈν”„λΌ μ„±κ³Ό

- **Docker ν™κ²½**: μ™„μ „ μ‘λ™
- **λ°μ΄ν„°λ² μ΄μ¤**: 19κ° ν…μ΄λΈ” μƒμ„± μ™„λ£ (TypeORM λ™κΈ°ν™”)
- **JWT μΈμ¦**: μ •μƒ μ‘λ™
- **MinIO μ¤ν† λ¦¬μ§€**: μ •μƒ μ„¤μ •
- **Redis μΊμ‹**: μ •μƒ μ‘λ™

### π”§ κΈ°λ¥ μ„±κ³Ό

- **μΈμ¦ μ‹μ¤ν…**: 100% μ‘λ™ (5/5 μ—”λ“ν¬μΈνΈ)
- **νμ‚¬ κ΄€λ¦¬**: 100% μ‘λ™ (5/5 μ—”λ“ν¬μΈνΈ)
- **μ‚¬μ©μ κ΄€λ¦¬**: 90% μ‘λ™ (3/5 μ—”λ“ν¬μΈνΈ)
- **μ±„ν… μ‹μ¤ν…**: 100% μ‘λ™ (3/3 μ—”λ“ν¬μΈνΈ)
- **νμΌ κ΄€λ¦¬**: 80% μ‘λ™ (2/3 μ—”λ“ν¬μΈνΈ)
- **ν—¬μ¤μ²΄ν¬**: 100% μ‘λ™ (4/4 μ—”λ“ν¬μΈνΈ)

### π§ ν…μ¤νΈ μ„±κ³Ό

- **API ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**: 80% (20/25 μ—”λ“ν¬μΈνΈ μ„±κ³µ)
- **μ¤λ¥ μμ •**: 2κ° μ£Όμ” μ¤λ¥ μ™„μ „ ν•΄κ²°
- **μƒλ΅μ΄ κΈ°λ¥ ν…μ¤νΈ**: 4κ° μ¶”κ°€ API ν…μ¤νΈ μ™„λ£
- **λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦**: κ¶ν• μ‹μ¤ν… μ •μƒ μ‘λ™ ν™•μΈ

## π― λ‹¤μ λ‹¨κ³„ κ¶μ¥μ‚¬ν•­

### 1. μ¦‰μ‹ μ‹¤ν–‰ κ°€λ¥

- [x] λ°κ²¬λ API μ¤λ¥ μμ • μ™„λ£
- [x] λ―Έν…μ¤νΈ API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ μ™„λ£
- [x] curl κΈ°λ° ν…μ¤νΈ μ¤ν¬λ¦½νΈ μƒμ„± μ™„λ£

### 2. λ‹¨κΈ° κ°μ„ μ‚¬ν•­ (1-2μ£Ό)

- [ ] νμΌ μ—…λ΅λ“ API μ™„μ „ ν…μ¤νΈ (mimeType ν•„λ“ μ¶”κ°€)
- [ ] WebSocket μ—°κ²° ν…μ¤νΈ
- [ ] μ„±λ¥ ν…μ¤νΈ μ‹¤ν–‰
- [ ] API μ‘λ‹µ μ‹κ°„ μΈ΅μ •

### 3. μ¤‘κΈ° κ°μ„ μ‚¬ν•­ (1κ°μ›”)

- [ ] Bruno CLI κµ¬λ¬Έ μ¤λ¥ ν•΄κ²°
- [ ] μλ™ν™”λ ν…μ¤νΈ μ¤μ„νΈ κµ¬μ¶•
- [ ] CI/CD νμ΄ν”„λΌμΈμ— ν…μ¤νΈ ν†µν•©
- [ ] API λ¬Έμ„ν™” μ—…λ°μ΄νΈ

### 4. μ¥κΈ° κ°μ„ μ‚¬ν•­ (3κ°μ›”)

- [ ] λ¶€ν• ν…μ¤νΈ λ° μ„±λ¥ μµμ ν™”
- [ ] λ³΄μ• ν…μ¤νΈ κ°•ν™”
- [ ] λ¨λ‹ν„°λ§ λ° μ•λ¦Ό μ‹μ¤ν… κµ¬μ¶•

## π“ ν…μ¤νΈ ν™κ²½ μ •λ³΄

### μ„λ²„ μ •λ³΄

- **λ°±μ—”λ“**: NestJS (Node.js 20.19.2)
- **λ°μ΄ν„°λ² μ΄μ¤**: PostgreSQL 15
- **μΊμ‹**: Redis
- **μ¤ν† λ¦¬μ§€**: MinIO (S3 νΈν™)

### ν…μ¤νΈ λ°μ΄ν„°

- **ν…μ¤νΈ μ‚¬μ©μ**: test-owner@example.com
- **ν…μ¤νΈ νμ‚¬**: TestCompany
- **μƒμ„±λ λ°μ΄ν„°**: 3κ° μ±„ν…λ°©, 3κ° μ¤λ λ“, 1λ… λ©¤λ²„

### μƒμ„±λ νμΌλ“¤

- `test-api.sh` - μλ™ν™” API ν…μ¤νΈ μ¤ν¬λ¦½νΈ
- `tests/reports/api-test-report.md` - μ΄κΈ° ν…μ¤νΈ λ³΄κ³ μ„
- `tests/reports/final-api-test-report.md` - μµμΆ… ν…μ¤νΈ λ³΄κ³ μ„

## π” μƒμ„Έ ν…μ¤νΈ λ΅κ·Έ

λ¨λ“  ν…μ¤νΈ μ‹¤ν–‰ λ΅κ·Έλ” ν„°λ―Έλ„ μ¶λ ¥μΌλ΅ κΈ°λ΅λμ—μΌλ©°, μ£Όμ” κ²°κ³Όλ“¤μ΄ μ΄ λ³΄κ³ μ„μ— μ”μ•½λμ–΄ μμµλ‹λ‹¤.

---

**λ³΄κ³ μ„ μƒμ„±μΌ**: 2025-10-05  
**ν…μ¤νΈ μ‹¤ν–‰μ**: Bruno API Testing Framework  
**λ‹¤μ κ²€ν† μΌ**: μ¶”κ°€ κΈ°λ¥ κ°λ° ν›„ μ¬ν…μ¤νΈ μμ •

## π† κ²°λ΅ 

ThreadFileSharing APIλ” **80%μ μ„±κ³µλ¥ **μ„ λ‹¬μ„±ν•λ©°, ν•µμ‹¬ κΈ°λ¥λ“¤μ΄ λ¨λ‘ μ •μƒ μ‘λ™ν•κ³  μμµλ‹λ‹¤. λ°κ²¬λ μ¤λ¥λ“¤μ€ λ¨λ‘ μμ •λμ—μΌλ©°, μ‹μ¤ν…μ΄ ν”„λ΅λ•μ… ν™κ²½μ—μ„ μ‚¬μ©ν•  μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤.
